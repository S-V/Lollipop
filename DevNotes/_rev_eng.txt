//===========================================================================================

Crysis 2

D:\games\Crysis 2 [2011]\bin32\Crysis2.exe


Vertex buffers of size:
524288

IBs:
262144

VS: 3600
PS: 3600

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 FLOAT2 DEFAULT TEXCOORD 0 
0 20 FLOAT3 DEFAULT TEXCOORD 1 
D3DDECL_END      


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT16_4 DEFAULT POSITION 0 
0 8 D3DCOLOR DEFAULT COLOR 0 
0 12 FLOAT16_2 DEFAULT TEXCOORD 0 
D3DDECL_END     


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 FLOAT3 DEFAULT TEXCOORD 0 
D3DDECL_END     

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 D3DCOLOR DEFAULT COLOR 0 
0 16 FLOAT2 DEFAULT TEXCOORD 0 
D3DDECL_END     

//*** skinned
//
Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT16_4 DEFAULT POSITION 0 
0 8 D3DCOLOR DEFAULT COLOR 0 
0 12 FLOAT16_2 DEFAULT TEXCOORD 0 
2 0 SHORT4N DEFAULT TANGENT 0 
3 0 D3DCOLOR DEFAULT BLENDWEIGHT 0 
3 4 D3DCOLOR DEFAULT BLENDINDICES 0 
5 0 FLOAT3 DEFAULT TEXCOORD 4 
5 12 FLOAT3 DEFAULT TEXCOORD 5 
5 24 D3DCOLOR DEFAULT COLOR 1 
D3DDECL_END      

Stream Offset Type Method Usage UsageIndex 
0 0 SHORT2 DEFAULT POSITION 0 
0 4 UBYTE4N DEFAULT COLOR 0 
D3DDECL_END     

//*** static
//
Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT16_4 DEFAULT POSITION 0 
0 8 D3DCOLOR DEFAULT COLOR 0 
0 12 FLOAT16_2 DEFAULT TEXCOORD 0 
1 0 SHORT4N DEFAULT TANGENT 0 
1 8 SHORT4N DEFAULT BINORMAL 0 
D3DDECL_END     

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT2 DEFAULT POSITION 0 
0 8 FLOAT2 DEFAULT TEXCOORD 0 
0 16 UBYTE4N DEFAULT COLOR 0 
D3DDECL_END     


Stream Offset Type Method Usage UsageIndex 
0 0 SHORT2 DEFAULT POSITION 0 
D3DDECL_END     


// *** decals
//
Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 D3DCOLOR DEFAULT COLOR 0 
0 16 FLOAT2 DEFAULT TEXCOORD 0 
1 0 SHORT4N DEFAULT TANGENT 0 
1 8 SHORT4N DEFAULT BINORMAL 0 
D3DDECL_END     



//===========================================================================================

C:\MyData\Games\Call of Duty - Modern Warfare 2 [2009]\iw4sp.exe


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
D3DDECL_END      

0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 UBYTE4 DEFAULT TEXCOORD 0 
0 24 UBYTE4 DEFAULT NORMAL 0 
D3DDECL_END     

0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 UBYTE4 DEFAULT TEXCOORD 0 
0 24 UBYTE4 DEFAULT NORMAL 0 
0 28 UBYTE4 DEFAULT TEXCOORD 2 
D3DDECL_END      

0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
D3DDECL_END     

0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
D3DDECL_END  


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 D3DCOLOR DEFAULT COLOR 0 
0 16 UBYTE4 DEFAULT TEXCOORD 0 
0 20 UBYTE4 DEFAULT NORMAL 0 
0 24 UBYTE4 DEFAULT TEXCOORD 2 
0 28 UBYTE4 DEFAULT TEXCOORD 3 
D3DDECL_END     




Shadow map:

1024x2048 (2 cascades, placed vertically)


objects without alpha are rendered to shadow map with this vertex decl:

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
D3DDECL_END     

with alpha (trees, leaves, bushes):

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 D3DCOLOR DEFAULT COLOR 0 
0 16 UBYTE4 DEFAULT TEXCOORD 0 
D3DDECL_END     



//===========================================================================================

C:\MyData\Games\Call of Duty - Black Ops [2010]\BlackOps.exe

mission about Dr. Steiner

they left PIX events in release executable!
(see R_DepthPrepass)

PIX tells us about 9080 device objects:

122 vertex shaders
201 pixel shaders

616 vertex buffers (128 bytes - 16 MiB)
733 index buffers (32 bytes - 2 MiB)
718 texture2D
36 vertex decls

Shadow map:
1024x2048 (2 cascades, placed vertically, upper one - for close objects)
D24S8

texture slot:
15 - env map
13,14 - light map ?

Models (e.g. weapons) are rendered with vertex decl:

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 UBYTE4 DEFAULT TEXCOORD 0 
0 24 UBYTE4 DEFAULT NORMAL 0 
0 28 UBYTE4 DEFAULT TEXCOORD 2 
D3DDECL_END     

// some static geometry
Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
1 0 FLOAT2 DEFAULT TEXCOORD 3 
1 8 UBYTE4N DEFAULT TEXCOORD 5 
D3DDECL_END     


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
D3DDECL_END     



Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 20 FLOAT2 DEFAULT TEXCOORD 0 
D3DDECL_END     


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT2 DEFAULT TEXCOORD 0 
D3DDECL_END     

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 UBYTE4 DEFAULT TEXCOORD 0 
D3DDECL_END     

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 UBYTE4 DEFAULT TEXCOORD 0 
0 24 UBYTE4 DEFAULT NORMAL 0 
D3DDECL_END     


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 UBYTE4 DEFAULT TEXCOORD 0 
0 24 UBYTE4 DEFAULT NORMAL 0 
0 28 UBYTE4 DEFAULT TEXCOORD 2 
D3DDECL_END     


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
1 0 FLOAT2 DEFAULT TEXCOORD 3 
1 8 UBYTE4N DEFAULT TEXCOORD 5 
D3DDECL_END      

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
1 0 FLOAT4 DEFAULT TEXCOORD 3 
1 16 UBYTE4N DEFAULT TEXCOORD 5 
1 20 UBYTE4N DEFAULT TEXCOORD 6 
D3DDECL_END      

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
D3DDECL_END      


Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT4 DEFAULT POSITION 0 
0 16 D3DCOLOR DEFAULT COLOR 0 
0 20 FLOAT4 DEFAULT TEXCOORD 0 
0 36 UBYTE4 DEFAULT NORMAL 0 
0 40 UBYTE4 DEFAULT TEXCOORD 2 
1 0 FLOAT4 DEFAULT TEXCOORD 3 
1 16 FLOAT2 DEFAULT TEXCOORD 4 
D3DDECL_END      


//===========================================================================================

EngineDemoPatched:

// most objects (i.e. leaves)
Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 UBYTE4N DEFAULT TANGENT 0 
0 16 UBYTE4N DEFAULT NORMAL 0 
0 20 FLOAT2 DEFAULT TEXCOORD 0 
D3DDECL_END     

Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 UBYTE4N DEFAULT TANGENT 0 
0 16 UBYTE4N DEFAULT NORMAL 0 
0 20 FLOAT2 DEFAULT TEXCOORD 0 
0 28 UBYTE4 DEFAULT BLENDINDICES 0 
0 32 FLOAT4 DEFAULT BLENDWEIGHT 0 
D3DDECL_END     

// quad for lens flares
Stream Offset Type Method Usage UsageIndex 
0 0 FLOAT3 DEFAULT POSITION 0 
0 12 FLOAT4 DEFAULT BINORMAL 0 
0 28 FLOAT2 DEFAULT TEXCOORD 0 
0 36 FLOAT1 DEFAULT TEXCOORD 1 
0 40 FLOAT4 DEFAULT TEXCOORD 2 
D3DDECL_END 

//===========================================================================================
